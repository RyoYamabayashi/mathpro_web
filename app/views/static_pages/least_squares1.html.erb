<!-- タイトルを動的に出力するためにタイトル(Home)を入力 -->
<% provide(:title, "最小二乗法") %>

  <div class="all">

    <div class="title">最小二乗法</div>

    <div class="column">
      <div class="main">

        <!-- ページネーション機能（Bootstrap） -->
        <nav aria-label="Page navigation">
          <!-- justify-content-centerでページネーションを中央寄せ -->
          <ul class="pagination justify-content-center">
            <li class="page-item disabled">
              <!-- 1ページ目なのでリンクはなし -->
              <a class="page-link">Prev</a>
            </li>
            <li class="page-item active">
              <span class="page-link">
                1<span class="sr-only">(current)</span>
              </span>
            </li>
            <li class="page-item">
              <a class="page-link" href="least_squares2">2</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="least_squares3">3</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="least_squares2">Next</a>
            </li>
          </ul>
        </nav>

        <div class="caption">はじめに</div>

        <div class="text">

          <div class="topSpace"></div>
          みなさん!
          <div class="box">
            <p>1年生の必修科目として大学で数学を学んでいるけど、将来本当に必要なの？</p>
            <p>数学を学ぶ意味がわからない!</p>
          </div>
          など、今ままで数学を学んできてそんな事を疑問に思ったことはありませんか？<br>
          そこで、ここでは実際に1年生が数学の授業で学んでいる解析学が世の中で応用されている一例として「最小二乗法」というものを紹介します。<br>

          <br>最小二乗法を用いると、<br>
          <div class="padl-20">
            ・既存の顧客情報&emsp;から&emsp;売上の予測<br>
            ・天気や気温情報&emsp;から&emsp;来店者数の予測<br>
            ・喫煙の年数&emsp;&emsp;&emsp;から&emsp;肺がんの有無<br>
            ・身長の情報&emsp;&emsp;&emsp;から&emsp;体重の予測<br>
          </div>
          といった「ある事柄からそれに関係する事柄の予測」に役立ちます。<br>

          <br>最小二乗法とは、次の表データ（6人の身長と体重のデータ）から、以下の図のような「データの関係を表すための関数」を求める方法です。
          <center>
            <table border="border" width="360" height="240"><br>
              <tr>
                <td></td>
                <td>身長</td>
                <td>体重</td>
              </tr>
              <tr>
                <td>1</td>
                <td>116.5($=x_1$)</td>
                <td>21.3($=y_1$)</td>
              </tr>
              <tr>
                <td>2</td>
                <td>125.5($=x_2$)</td>
                <td>22.0($=y_2$)</td>
              </tr>
              <tr>
                <td>3</td>
                <td>128.1($=x_3$)</td>
                <td>26.9($=y_3$)</td>
              </tr>
              <tr>
                <td>4</td>
                <td>132.0($=x_4$)</td>
                <td>32.3($=y_4$)</td>
              </tr>
              <tr>
                <td>5</td>
                <td>141.0($=x_5$)</td>
                <td>33.1($=y_5$)</td>
              </tr>
              <tr>
                <td>6</td>
                <td>145.2($=x_6$)</td>
                <td>38.2($=y_6$)</td>
              </tr>
            </table>
          </center>
          <br>この表データをグラフに表示すると以下のようになります。<br><br>

          <center><%= link_to image_tag("pic1.1.png") %><%= link_to image_tag("pic1.2.png") %></center><br>
          このデータの関係を表すための$^*$関数(身長と体重の関係を表す関数)を求めることができれば、身長から体重を予測することができます。
          <br>例えば、身長が138cmの人の体重をこの直線を用いて予測してみましょう。
          <div class="hidden_box">
            <input type="checkbox" id="label1"/>
            <div class="hidden_show">
              <!--非表示ここから-->
              <div class="text">
                <p>直線より曲線の方が、よりデータとの関係を表すための関数を求めることができると思った方もいるかもしれません。たしかに、曲線の方が、よりデータとの関係を表すための関数を求めることができる場合もあります。 しかし、最小二乗法を用いて曲線を求めようとすると、直線を求めるときよりも関数が複雑になるので計算が難しくなります。したがって、このサイトでは計算が簡単な直線を求める方法について考えることとします。</p>
              </div>
              <!--ここまで-->
            </div>
          </div>
          <br><br>
          <center>
            <iframe
              src="https://docs.google.com/presentation/d/e/2PACX-1vRlte2h-hp65_isfpo82ggSkUZhvXuv-8UM2yN4jTXAfeCFMBla6g-qedeLaSaq0pjGjEj6tRlebMD7/embed?start=true&loop=true&delayms=1000"
              frameborder="0"
              width="480"
              height="300"
              allowfullscreen="true"
              mozallowfullscreen="true"
              webkitallowfullscreen="true"></iframe>
          </center>
          <br>

          スライドから、身長が138cmの人は、体重がおおよそ33kgであることが予測できます。<br><br>
        </div>

        <!-- ページネーション機能（Bootstrap） -->
        <nav aria-label="Page navigation">
          <!-- justify-content-centerでページネーションを中央寄せ -->
          <ul class="pagination justify-content-center">
            <li class="page-item disabled">
              <!-- 1ページ目なのでリンクはなし -->
              <a class="page-link">Prev</a>
            </li>
            <li class="page-item active">
              <span class="page-link">
                1<span class="sr-only">(current)</span>
              </span>
            </li>
            <li class="page-item">
              <a class="page-link" href="least_squares2">2</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="least_squares3">3</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="least_squares2">Next</a>
            </li>
          </ul>
        </nav>

        <div class="sub">

          <div class="text-sub">
            <div class="pad0"></div>
            ※当サイトでは、データの関係を表すための関数が存在すると仮定します
          </div>

          <div class="text-sub">
            <div class="pad1"></div>
            <div class="hidden_box">
              <label for="label1">
                <span class="underl">なぜ曲線ではなく直線？</span></label>
            </div>
          </div>

          <div class="text-sub">
            <div class="pad7"></div>
            以下の2,3年次の講義で扱われています<br>
            ・応用数学$II$<br>
            ・数値解析<br>
            ・物理と情報処理$I$<br>
            ・複雑系科学実験<br>
          </div>

          <div class="text-sub">
            <div class="pad4"></div>
            ※誤差の二乗和とは、「すべてのデータの誤差を二乗して足し合わせたもの」のことです
          </div>

          <div class="text-sub">
            <div class="pad5"></div>
            ※二乗のほか、四乗や偶数乗、そして絶対値が考えられます。四乗や偶数乗をすると負の値は消えます。 しかし、値が大きくなり計算が複雑になります。また、絶対値にすると、微分をしたときに対数を考えなければいけなくなり、 この場合も計算が複雑になります。よって最も計算が簡単な二乗を用います。
          </div>

          <div class="text-sub">
            <div class="pad2"></div>
            <br><br>$f(a,b)=a^2+ab$<br>

            $f(a,b)$を$a$で微分<br>
            $(f(a,b)$を$a$で微分$)=2a+b$<br>

            $f(a,b)$を$b$で微分<br>
            $(f(a,b)$を$b$で微分$)=a$<br>
          </div>

          <div class="text-sub">
            <div class="pad6"></div>
            ※ここの微分は，厳密には偏微分を意味する<br>
          </div>

          <div clas="text-sub">
            <div class="pad3"></div>
            <div class="box26">
              <span class="box-title">①</span>
              <p>
                <input id="Radio1" name="RadioGroup1" type="radio" onchange="onRadioButtonChange1();" value="結果：おめでとう、正解です">
                <label for="Radio1">$4-(5a+b)$</label>&emsp;
                <input id="Radio2" name="RadioGroup1" type="radio" onchange="onRadioButtonChange1();" value="結果：残念、不正解です">
                <label for="Radio2">$7-(6a+b)$</label><br>
                <input id="Radio3" name="RadioGroup1" type="radio" onchange="onRadioButtonChange1();" value="結果：残念、不正解です">
                <label for="Radio3">$5-(4a+b)$</label>
              </p>
              <span id="span1">結果：</span>
            </div>

            <div class="box26">
              <div class="box-title">②</div>
              <p>
                <input id="Radio4" name="RadioGroup2" type="radio" onchange="onRadioButtonChange2();" value="結果：おめでとう、正解です">
                <label for="Radio4">$16-40a-8b+25a^2+10ab$</label><br>
                <input id="Radio5" name="RadioGroup2" type="radio" onchange="onRadioButtonChange2();" value="結果：残念、不正解です">
                <label for="Radio5">$16-20a-8b+16a^2+10ab$</label><br>
                <input id="Radio6" name="RadioGroup2" type="radio" onchange="onRadioButtonChange2();" value="結果：残念、不正解です">
                <label for="Radio6">$25-40a-10b+16a^2+8ab$</label>
              </p>
              <span id="span2">結果：</span>
            </div>

            <div id="output2"></div>

            <div class="box26">
              <div class="box-title">③</div>
              <p>
                <input id="Radio7" name="RadioGroup3" type="radio" onchange="onRadioButtonChange3();" value="結果：おめでとう、正解です">
                <label for="Radio7">$510a+70b-526$</label><br>
                <input id="Radio8" name="RadioGroup3" type="radio" onchange="onRadioButtonChange3();" value="結果：残念、不正解です">
                <label for="Radio8">$510a+10b-526$</label><br>
                <input id="Radio9" name="RadioGroup3" type="radio" onchange="onRadioButtonChange3();" value="結果：残念、不正解です">
                <label for="Radio9">$510a+10b-72$</label>
              </p>
              <span id="span3">結果：</span>
            </div>

            <div id="output3"></div>

            <div class="box26">
              <div class="box-title">④</div>
              <p>
                <input id="Radio10" name="RadioGroup4" type="radio" onchange="onRadioButtonChange4();" value="結果：おめでとう、正解です">
                <label for="Radio10">$10b+70a-72$</label><br>
                <input id="Radio11" name="RadioGroup4" type="radio" onchange="onRadioButtonChange4();" value="結果：残念、不正解です">
                <label for="Radio11">$510a+70b-526$</label><br>
                <input id="Radio12" name="RadioGroup4" type="radio" onchange="onRadioButtonChange4();" value="結果：残念、不正解です">
                <label for="Radio12">$10b+70b-282$</label>
              </p>
              <span id="span4">結果：</span>
            </div>

            <div id="output4"></div>

            <div class="box26">
              <div class="box-title">⑤</div>
              <p>
                <input id="Radio13" name="RadioGroup5" type="radio" onchange="onRadioButtonChange5();" value="結果：おめでとう、正解です">
                <label for="Radio13">$1.1$</label>&emsp;
                <input id="Radio14" name="RadioGroup5" type="radio" onchange="onRadioButtonChange5();" value="結果：残念、不正解です">
                <label for="Radio14">$11$</label>&emsp;
                <input id="Radio15" name="RadioGroup5" type="radio" onchange="onRadioButtonChange5();" value="結果：残念、不正解です">
                <label for="Radio15">$0.11$</label>
              </p>
              <span id="span5">結果：</span>
            </div>

            <div id="output5"></div>

            <div class="box26">
              <div class="box-title">⑥</div>
              <p>
                <input id="Radio16" name="RadioGroup6" type="radio" onchange="onRadioButtonChange6();" value="結果：おめでとう、正解です">
                <label for="Radio16">$-0.5$</label>&emsp;
                <input id="Radio17" name="RadioGroup6" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                <label for="Radio17">$-0.2$</label>&emsp;
                <input id="Radio18" name="RadioGroup6" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                <label for="Radio18">$0.5$</label>
                <p>
                  <span id="span6">結果：</span>
                </div>

                <div id="output6"></div>

                <div class="box26">
                  <div class="box-title">⑦</div>
                  <p>
                    <input id="Radio16" name="RadioGroup7" type="radio" onchange="onRadioButtonChange6();" value="結果：おめでとう、正解です">
                    <label for="Radio16">$4$</label>&emsp;
                    <input id="Radio17" name="RadioGroup7" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                    <label for="Radio17">$5$</label>&emsp;
                    <input id="Radio18" name="RadioGroup7" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                    <label for="Radio18">$9$</label>
                    <p>
                      <span id="span7">結果：</span>
                    </div>

                    <div id="output7"></div>

                    <div class="box26">
                      <div class="box-title">⑧</div>
                      <p>
                        <input id="Radio16" name="RadioGroup8" type="radio" onchange="onRadioButtonChange6();" value="結果：おめでとう、正解です">
                        <label for="Radio16">$4.4$</label>&emsp;
                        <input id="Radio17" name="RadioGroup8" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                        <label for="Radio17">$5.5$</label>&emsp;
                        <input id="Radio18" name="RadioGroup8" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                        <label for="Radio18">$9.9$</label>
                        <p>
                          <span id="span8">結果：</span>
                        </div>

                        <div id="output8"></div>

                        <div class="box26">
                          <div class="box-title">⑨</div>
                          <p>
                            <input id="Radio16" name="RadioGroup9" type="radio" onchange="onRadioButtonChange6();" value="結果：おめでとう、正解です">
                            <label for="Radio16">$3.9$</label>&emsp;
                            <input id="Radio17" name="RadioGroup9" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                            <label for="Radio17">$4.9$</label>&emsp;
                            <input id="Radio18" name="RadioGroup9" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                            <label for="Radio18">$9.4$</label>
                            <p>
                              <span id="span9">結果：</span>
                            </div>

                            <div id="output9"></div>
                          </div>
                          <!--①\{4-(5a+b)\}^2 ➁16-40a-8b+25a^2+10ab ③510a+70b-526 ④10b+70a-72 ⑤1.1 ⑥-0.5 ⑦4 4.4 3.9-->

                          <div class="text-sub">
                            <input type="button" value="解答チェック" onclick="clickBtn1()"/><br>
                            <span id="span1_1">(1)結果：</span><br>
                            <span id="span2_1">(2)結果：</span><br>
                            <span id="span3_1">(3)結果：</span><br>
                            <span id="span4_1">(4)結果：</span><br>
                            <span id="span5_1">(5)結果：</span><br>
                            <span id="span6_1">(6)結果：</span><br>
                            <span id="span7_1">(7)結果：</span><br>
                            <span id="span8_1">(8)結果：</span><br>
                            <span id="span9_1">(9)結果：</span><br>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- ページ読み込み後にリロードしてTEXを表示 -->
                    <script language="JavaScript">

                      if (window.name != "least_squares") {
                        location.reload();
                        window.name = "least_squares";
                      }
                    </script>

                    <script type="text/javascript" language="javascript">

                      function clickBtn1() {
                        let str1 = "",
                          str1_1 = "";
                        let str2 = "",
                          str2_1 = "";
                        let str3 = "",
                          str3_1 = "";
                        let str4 = "",
                          str4_1 = "";
                        let str5 = "",
                          str5_1 = "";
                        let str6 = "",
                          str6_1 = "";
                        let str7 = "",
                          str7_1 = "";
                        let str8 = "",
                          str8_1 = "";
                        let str9 = "",
                          str9_1 = "";
                        const RadioGroup1 = document.getElementsByName("RadioGroup1");
                        for (let i = 0; i < RadioGroup1.length; i++) {

                          if (RadioGroup1[0].checked === true) {
                            str1 = RadioGroup1[0].value;
                            str1_1 = "(1) 結果：○";
                            break;
                            //target.innerHTML = "おめでとう、正解です";
                          } else if (RadioGroup1[1].checked == true) {
                            str1 = RadioGroup1[1].value;
                            str1_1 = "(1) 結果：×";
                            break;
                          } else if (RadioGroup1[2].checked == true) {
                            str1 = RadioGroup1[2].value;
                            str1_1 = "(1) 結果：×";
                            break;

                          }

                        }

                        const RadioGroup2 = document.getElementsByName("RadioGroup2");
                        for (let i = 0; i < RadioGroup2.length; i++) {

                          if (RadioGroup2[0].checked === true) {
                            str2 = RadioGroup2[0].value;
                            str2_1 = "(1) 結果：○";
                            break;
                            //target.innerHTML = "おめでとう、正解です";
                          } else if (RadioGroup2[1].checked == true) {
                            str2 = RadioGroup2[1].value;
                            str2_1 = "(1) 結果：×";
                            break;
                          } else if (RadioGroup2[2].checked == true) {
                            str2 = RadioGroup2[2].value;
                            str2_1 = "(1) 結果：×";
                            break;
                          }

                        }

                        const RadioGroup3 = document.getElementsByName("RadioGroup3");
                        for (let i = 0; i < RadioGroup3.length; i++) {

                          if (RadioGroup3[0].checked === true) {
                            str3 = RadioGroup3[0].value;
                            str3_1 = "(1) 結果：○";
                            break;
                            //target.innerHTML = "おめでとう、正解です";
                          } else if (RadioGroup3[1].checked == true) {
                            str3 = RadioGroup3[1].value;
                            str3_1 = "(1) 結果：×";
                            break;
                          } else if (RadioGroup3[2].checked == true) {
                            str3 = RadioGroup3[2].value;
                            str3_1 = "(1) 結果：×";
                            break;
                          }

                        }

                        const RadioGroup4 = document.getElementsByName("RadioGroup4");
                        for (let i = 0; i < RadioGroup4.length; i++) {

                          if (RadioGroup4[0].checked === true) {
                            str4 = RadioGroup4[0].value;
                            str4_1 = "(1) 結果：○";
                            break;
                            //target.innerHTML = "おめでとう、正解です";
                          } else if (RadioGroup4[1].checked == true) {
                            str4 = RadioGroup4[1].value;
                            str4_1 = "(1) 結果：×";
                            break;
                          } else if (RadioGroup4[2].checked == true) {
                            str4 = RadioGroup4[2].value;
                            str4_1 = "(1) 結果：×";
                            break;
                          }

                        }

                        const RadioGroup5 = document.getElementsByName("RadioGroup5");
                        for (let i = 0; i < RadioGroup5.length; i++) {

                          if (RadioGroup5[0].checked === true) {
                            str5 = RadioGroup5[0].value;
                            str5_1 = "(1) 結果：○";
                            break;
                            //target.innerHTML = "おめでとう、正解です";
                          } else if (RadioGroup5[1].checked == true) {
                            str5 = RadioGroup5[1].value;
                            str5_1 = "(1) 結果：×";
                            break;
                          } else if (RadioGroup5[2].checked == true) {
                            str5 = RadioGroup5[2].value;
                            str5_1 = "(1) 結果：×";
                            break;
                          }

                        }

                        const RadioGroup6 = document.getElementsByName("RadioGroup6");
                        for (let i = 0; i < RadioGroup6.length; i++) {

                          if (RadioGroup6[0].checked === true) {
                            str6 = RadioGroup6[0].value;
                            str6_1 = "(1) 結果：○";
                            break;
                            //target.innerHTML = "おめでとう、正解です";
                          } else if (RadioGroup6[1].checked == true) {
                            str6 = RadioGroup6[1].value;
                            str6_1 = "(1) 結果：×";
                            break;
                          } else if (RadioGroup6[2].checked == true) {
                            str6 = RadioGroup6[2].value;
                            str6_1 = "(1) 結果：×";
                            break;
                          }
                        }

                        const RadioGroup7 = document.getElementsByName("RadioGroup7");
                        for (let i = 0; i < RadioGroup7.length; i++) {

                          if (RadioGroup7[0].checked === true) {
                            str7 = RadioGroup7[0].value;
                            str7_1 = "(1) 結果：○";
                            break;
                            //target.innerHTML = "おめでとう、正解です";
                          } else if (RadioGroup7[1].checked == true) {
                            str7 = RadioGroup7[1].value;
                            str7_1 = "(1) 結果：×";
                            break;
                          } else if (RadioGroup7[2].checked == true) {
                            str7 = RadioGroup7[2].value;
                            str7_1 = "(1) 結果：×";
                            break;

                          }

                        }

                        const RadioGroup8 = document.getElementsByName("RadioGroup8");
                        for (let i = 0; i < RadioGroup8.length; i++) {

                          if (RadioGroup8[0].checked === true) {
                            str8 = RadioGroup8[0].value;
                            str8_1 = "(1) 結果：○";
                            break;
                            //target.innerHTML = "おめでとう、正解です";
                          } else if (RadioGroup8[1].checked == true) {
                            str8 = RadioGroup8[1].value;
                            str8_1 = "(1) 結果：×";
                            break;
                          } else if (RadioGroup8[2].checked == true) {
                            str8 = RadioGroup8[2].value;
                            str8_1 = "(1) 結果：×";
                            break;

                          }

                        }

                        const RadioGroup9 = document.getElementsByName("RadioGroup9");
                        for (let i = 0; i < RadioGroup9.length; i++) {

                          if (RadioGroup9[0].checked === true) {
                            str9 = RadioGroup9[0].value;
                            str9_1 = "(1) 結果：○";
                            break;
                            //target.innerHTML = "おめでとう、正解です";
                          } else if (RadioGroup9[1].checked == true) {
                            str9 = RadioGroup9[1].value;
                            str9_1 = "(1) 結果：×";
                            break;
                          } else if (RadioGroup9[2].checked == true) {
                            str9 = RadioGroup9[2].value;
                            str9_1 = "(1) 結果：×";
                            break;

                          }

                        }
                        document.getElementById("span1").textContent = str1;
                        document.getElementById("span1_1").textContent = str1_1;
                        document.getElementById("span2").textContent = str2;
                        document.getElementById("span2_1").textContent = str2_1;
                        document.getElementById("span3").textContent = str3;
                        document.getElementById("span3_1").textContent = str3_1;
                        document.getElementById("span4").textContent = str4;
                        document.getElementById("span4_1").textContent = str4_1;
                        document.getElementById("span5").textContent = str5;
                        document.getElementById("span5_1").textContent = str5_1;
                        document.getElementById("span6").textContent = str6;
                        document.getElementById("span6_1").textContent = str6_1;
                        document.getElementById("span7").textContent = str7;
                        document.getElementById("span7_1").textContent = str7_1;
                        document.getElementById("span8").textContent = str8;
                        document.getElementById("span8_1").textContent = str8_1;
                        document.getElementById("span9").textContent = str9;
                        document.getElementById("span9_1").textContent = str9_1;
                      }
                    </script>
