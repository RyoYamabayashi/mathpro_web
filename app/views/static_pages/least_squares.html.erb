<!-- タイトルを動的に出力するためにタイトル(Home)を入力 -->
<% provide(:title, "最小二乗法") %>

  <div class="all">

    <div class="title">最小二乗法</div>

    <div class="column">
      <div class="main">

        <div class="caption">はじめに</div>

        <div class="text">

          <div class="topSpace"></div>
          みなさん!
          <div class="box">
            <p>1年生の必修科目として大学で数学を学んでいるけど、将来本当に必要なの？</p>
            <p>数学を学ぶ意味がわからない!</p>
          </div>
          など、今ままで数学を学んできてそんな事を疑問に思ったことはありませんか？<br>
          そこで、ここでは実際に1年生が数学の授業で学んでいる解析学が世の中で応用されている一例として「最小二乗法」というものを紹介します。<br>

          <br>最小二乗法を用いると、<br>
          <div class="padl-10">
            ・既存の顧客情報&emsp;から&emsp;売上の予測<br>
            ・天気や気温情報&emsp;から&emsp;来店者数の予測<br>
            ・喫煙の年数&emsp;&emsp;&emsp;から&emsp;肺がんの有無<br>
            ・身長の情報&emsp;&emsp;&emsp;から&emsp;体重の予測<br>
          </div>
          といった「ある事柄からそれに関係する事柄の予測」に役立ちます。<br>

          <br>最小二乗法とは、次の表データ（6人の身長と体重のデータ）から、以下の図のような「データの関係を表すための関数」を求める方法です。
          <center>
            <table border="border" width="360" height="240"><br>
              <tr>
                <td>　　</td>
                <td>身長</td>
                <td>体重</td>
              </tr>
              <tr>
                <td>1</td>
                <td>116.5($=x_1$)</td>
                <td>21.3($=y_1$)</td>
              </tr>
              <tr>
                <td>2</td>
                <td>125.5($=x_2$)</td>
                <td>22.0($=y_2$)</td>
              </tr>
              <tr>
                <td>3</td>
                <td>128.1($=x_3$)</td>
                <td>26.9($=y_3$)</td>
              </tr>
              <tr>
                <td>4</td>
                <td>132.0($=x_4$)</td>
                <td>32.3($=y_4$)</td>
              </tr>
              <tr>
                <td>5</td>
                <td>141.0($=x_5$)</td>
                <td>33.1($=y_5$)</td>
              </tr>
              <tr>
                <td>6</td>
                <td>145.2($=x_6$)</td>
                <td>38.2($=y_6$)</td>
              </tr>
            </table>
          </center>
          <br>この表データをグラフに表示すると以下のようになります。<br><br>

          <center><%= link_to image_tag("pic1.1.png") %><%= link_to image_tag("pic1.2.png") %></center><br>
          このデータの関係を表すための$^*$関数(身長と体重の関係を表す関数)を求めることができれば、身長から体重を予測することができます。
          <br>例えば、身長が138cmの人の体重をこの直線を用いて予測してみましょう。
          <div class="hidden_box">
          <input type="checkbox" id="label1"/>
          <div class="hidden_show">
            <!--非表示ここから-->
            <div class="text">
              <p>直線より曲線の方が、よりデータとの関係を表すための関数を求めることができると思った方もいるかもしれません。たしかに、曲線の方が、よりデータとの関係を表すための関数を求めることができる場合もあります。
                しかし、最小二乗法を用いて曲線を求めようとすると、直線を求めるときよりも関数が複雑になるので計算が難しくなります。したがって、このサイトでは計算が簡単な直線を求める方法について考えることとします。</p>
            </div>
            <!--ここまで-->
          </div>
          </div>
          <br><br>
          <center><iframe
            src="https://docs.google.com/presentation/d/e/2PACX-1vRlte2h-hp65_isfpo82ggSkUZhvXuv-8UM2yN4jTXAfeCFMBla6g-qedeLaSaq0pjGjEj6tRlebMD7/embed?start=true&loop=true&delayms=1000"
            frameborder="0"
            width="480"
            height="300"
            allowfullscreen="true"
            mozallowfullscreen="true"
            webkitallowfullscreen="true"></iframe>
          </center>
          <br>

          スライドから、身長が138cmの人は、体重がおおよそ33kgであることが予測できます。<br><br>
        </div>

        <div class="caption">最小二乗法とは</div>
        <div class="topSpace"></div>
        <div class="text">
          ここではより詳しく最小二乗法について説明します。<br>
          最小二乗法とは、「$^*$誤差の二乗和が最小となる関数$f(x)$(データの関係を表すための関数)」を求める方法です。
          データ$(x_i,y_i)$をグラフ上に表した点$(x_i,y_i)$の誤差は、$y_i$から関数$f(x_i)$を引いたものです。<br>
          例えば、下の図でいうとデータ$(x_4,y_4)$の誤差は$y_4-f(x_4)$です。<br><br>

          <center><%= link_to image_tag("pic2.png") %></center>
          <center>※青い点は実際のデータ、赤い線は関数$f(x)$、↔は誤差</center><br>

          最小二乗法では「データの関係を表す<b>曲線</b>」を求めることもできますが、前述した通り複雑で分かりにくいので、 今回は「データの関係を表す<b>直線</b>」を求める方法に限定して簡単に説明します。<br>
          直線($f(x)=ax+b$)は傾き$a$と切片$b$を求めることで1つに決まるので、 誤差が最小となるような$a,b$を求めることを目標にします。<br><br>

          <center><%= link_to image_tag("pic3.png") %></center><br>

          上の図のように誤差が最小となる直線を引くためにはどのようにすればよいでしょう。 実際に傾き$a$と切片$b$の値を変えて確認してみましょう。<br><br>

          <center>
            <iframe
              src="https://docs.google.com/presentation/d/e/2PACX-1vTIWv7RoUWfQzAwm3iBGpavqe973BkN0_qmoj8UfRcIscYtU2UL6gK6V5fQf9keZjrx86ZOrp64rPrA/embed?start=true&loop=true&delayms=1000"
              frameborder="0"
              width="480"
              height="300"
              allowfullscreen="true"
              mozallowfullscreen="true"
              webkitallowfullscreen="true"></iframe>
          </center><br>

          ①は$a=0.2, b=16$　②は$a=0.6, b=16$　③は$a=0.6,b=-50$　です。<br><br>

          スライドを見ると、$a,b$を変えることによって誤差も変わることが分かります。 $a,b$を変えることで誤差を最小にできると考えられます。
          誤差を小さくするということは、各データの誤差の和を小さくするということです。<br>
          しかし、誤差(下図の↔)をそのまま足すと、正負が混合している場合、誤差の和が0になることがあります。 下の図のように誤差の和が0で最小なのにも関わらず、この直線は「データの関係を表す」直線ではないことが見てわかります。<br><br>

          <center><%= link_to image_tag("pic4.png") %></center><br>

          そこで、負の数をなくすために誤差を$^*$二乗して、正の数にします。<br>
          データの数を$n$個として、誤差の二乗和を$E(a,b)$とすると次のように表せます。<br>
          $E(a,b)$ = (1番目のデータの誤差)$^2$+(2番目のデータの誤差)$^2$+…+($n$番目のデータの誤差)$^2$ となります。<br>
          例えば、4番目のデータの誤差に注目すると<br><br>

          <center><%= link_to image_tag("pic5.png") %></center><br>

          誤差の式は$y_4-(ax_4+b)$となります。 したがって、$x$が$i$番目のときに注目すると誤差の式は$y_i-(ax_i+b)$となります。つまり、誤差の二乗和$E(a,b)$は<br><br>
          <div class="padl-10">
            $E(a,b)= \{y_1-(ax_1+b)\}^2+\{y_2-(ax_2+b)\}^2+…+\{y_n-(ax_n+b)\}^2$
            $E(a,b)=\displaystyle\sum_{i=1}^{n} \{y_i-(ax_i+b)\}^2$&emsp;($n$はデータ数) となります。
          </div><br>

          関数$E$を展開すると、
          <div class="hidden_box2">
            <label for="label2">
              <span class="underl">展開の途中式</span>
            </label>
            <input type="checkbox" id="label2"/>
            <div class="hidden_show2">
              <!--非表示ここから-->
              <div class="text">
                <p>$E(a,b)=\displaystyle\sum_{i=1}^{n} \{y_i-(ax_i+b)\}^2$</p>
                <p>$E(a,b)=\displaystyle\sum_{i=1}^{n} \{y_i^2-2(ax_i+b)y_i+(ax_i+b)^2\}$</p>
              </div>
              <!--ここまで-->
            </div>
          </div>
          $E(a,b)=\displaystyle\sum_{i=1}^{n} (y_i^2-2ax_iy_i-2by_i+a^2x_i^2+2abx_i+b^2)$ となります。<br>
          この関数$E(a,b)$を図に表すと、$E(a,b)$は二変数の関数であるため、$Z=E(a,b)$とすると下の図のようになります。<br><br>

          <center><%= link_to image_tag("pic6.png") %></center><br>

          この関数の最小点を考えるために、関数$E(a,b)$の最小点を$(a^*,b^*)$として、$a=a^*$、または$b=b^*$で切ったときの断面図をそれぞれ見てみましょう。<br><br>

          <center><%= link_to image_tag("pic7.png") %></center><br>

          まず、$b=b^*$で切ったときの断面図(上図)から考えてみましょう。
          一変数で下に凸の二次関数は傾きが0のときに最小値となります。<br>
          同じように、この断面図$(b=b^*)$でも「傾きが0になるとき」に最小値となることが分かります。<br><br>

          <center><%= link_to image_tag("pic8.png") %></center><br>

          次に、$a=a*$で切った時の断面図(上図)を考えてみましょう。<br>
          一変数で下に凸の二次関数は傾きが0のときに最小値となります。<br>
          同じように、この断面図$(a=a^*)$でも「傾きが0になるとき」に最小値となることが分かります。<br><br>

          <center><%= link_to image_tag("pic9.png") %></center><br>

          以上より、最小点$(a^*,b^*)$を考えると…<br>
	        <div class="padl-10">
            $a^*…b=b^*$で切った時の断面図において、傾きが0になる$a$の値<br>
	          $b^*…a=a^*$で切った時の断面図において、傾きが0になる$b$の値<br>
          </div>

          したがって、「$b$を定数として固定して関数$E(a,b)$を$a$で微分したもの」と「$a$を定数として固定して関数$E(a,b)$を$b$で微分したもの」がともに0となる点$(a^*,b^*)$を見つけます。<br><br>
          ここで、二変数の関数を微分する方法を紹介します。<br>
          二変数の関数の微分の方法といっても一変数のときとあまり違いはありません。<br>
          例えば、関数$E(a,b)$を$a$で微分したいときは$b$を定数だと考えて一変数のときと同じように微分をすることができます。
          実際に$b$を定数として固定して関数$E(a,b)$を$a$で微分したものと、$a$を定数として固定して関数$E(a,b)$を$b$で微分したものを計算して最小点$(a^*,b^*)$を求めてみましょう。<br><br>

          関数$E(a,b)$を$a$で$^*$微分すると<br>
          <span class="hidden_box2">
            <label for="label3"><span class="underl">$(E(a,b)$の式を忘れた人はここをクリック！$)$</span></label>

            <input type="checkbox" id="label3"/>
            <div class="hidden_show2">
              <!--非表示ここから-->
              <span class="text">$E(a,b)=\displaystyle\sum_{i=1}^{n} (y_i^2-2ax_iy_i-2by_i+a^2x_i^2+2abx_i+b^2)$</span>
              <!--ここまで-->
            </div>
          </span>
          $($関数$E(a,b)$を$a$で微分$)=\displaystyle\sum_{i=1}^{n} (-2x_iy_i+2ax_i^2+2bx_i)$<br><br>

          関数$E(a,b)$を$b$で微分すると<br>
          $($関数$E(a,b)$を$b$で微分$)=\displaystyle\sum_{i=1}^{n} (-2y_i+2ax_i+2b)$<br>
          となります。<br><br>

          上の2式に対して連立方程式をたてると
          \[
          \begin{cases}
          \displaystyle\sum_{i=1}^{n} (-2x_iy_i+2ax_i^2+2bx_i)=0 \\
          \displaystyle\sum_{i=1}^{n} (-2y_i+2ax_i+2b)=0
          \end{cases}
          \]
          となり、この連立方程式を解くと、誤差の二乗和が最小となる$a$と$b$が求めることができます。<br><br>
          誤差の二乗和が最小となる傾き$a$,切片$b$が求められたので、「データの関係を表すための直線」の式$(f(x)=ax+b)$が得られます。<br><br>
        </div>

        <div class="caption">実際にやってみよう</div>
        <div class="topSpace"></div>
        <div class="text1">
          <div class="caption2">例題: 英語と数学の点数のデータに対して、「データの関係を表すための関数」が直線であると仮定する。
            このときの「データの関係を表すための直線」を最小二乗法を用いて求めよ。また、英語の点数が4点の人の数学の点数を求めた直線に基づいて予測せよ。<br>
      </div>

      <center>
        <table border="border" width="360" height="240"><br>
          <tr>
            <td>人名/点数</td>
            <td>数学(点)</td>
            <td>英語(点)</td>
          </tr>
          <tr>
            <td>Aさん</td>
            <td>5　$(=x_1)$</td>
            <td>4　$(=y_1)$</td>
          </tr>
          <tr>
            <td>Bさん</td>
            <td>6　$(=x_2)$</td>
            <td>7　$(=y_2)$</td>
          </tr>
          <tr>
            <td>Cさん</td>
            <td>7　$(=x_3)$</td>
            <td>9　$(=y_3)$</td>
          </tr>
          <tr>
            <td>Dさん</td>
            <td>8　$(=x_4)$</td>
            <td>6　$(=y_4)$</td>
          </tr>
          <tr>
            <td>Eさん</td>
            <td>9　$(=x_5)$</td>
            <td>10　$(=y_5)$</td>
          </tr>
        </table>
      </center>

      <br><br><center><%= link_to image_tag("pro1.png") %></center><br><br>

      求めたい直線を$f(x)=ax+b$とおくと誤差の二乗和$E(a,b)$は<br><br>
      $E(a,b)=\displaystyle\sum_{i=1}^{5}\{y_i-(ax_i+b)\}^2$<br>
      <div class="mgr-55">$=\{y_1-(ax_1+b)\}^2 + \{y_2-(ax_2+b)\}^2 + \{y_3-(ax_3+b)\}^2 +
          \{y_4-(ax_4+b)\}^2 + \{y_5-(ax_5+b)\}^2$</div>

        <br>ここで各データ$(x_i,y_i)(i=1$~$5)$を代入すると<br><br>
        $E(a,b)=\{y_1-(ax_1+b)\}^2 + \{y_2-(ax_2+b)\}^2 + \{y_3-(ax_3+b)\}^2 + \{y_4-(ax_4+b)\}^2 + \{y_5-(ax_5+b)\}^2 $
        <div class="mgr-55">$=(1)\underline{\{&emsp;&emsp;\}}^2+ \{7-(6a+b)\}^2 + \{9-(7a+b)\}^2 + \{6-(8a+b)\}^2 + \{10-(9a+b)\}^2$</div><br>
        $i=1$のときの$(1)\underline{\{&emsp;&emsp;\}}^2$を計算すると、$=(2)\underline{(&emsp;&emsp;)}+b^2$<br>
        $(1)\underline{\{&emsp;&emsp;\}}^2$
        <span class="hidden_box3">
          <label for="label4">途中式</label>

          <input type="checkbox" id="label4"/>
          <div class="hidden_show3">
            <!--非表示ここから-->
            <span class="text">$=4^2-2\times4\times(5a+b)+(5a+b)^2$
              $=16-2\times4\times5a-2\times4\times b+(5a)^2+2\times5ab+b^2$</span>
            <!--ここまで-->
          </div>
          <br>
        </span>

        同様に$i=2$~$5$についても計算すると<br><br>
        $\{7-(6a+b)\}^2$
        <span class="hidden_box3">
          <label for="label5">途中式</label>

          <input type="checkbox" id="label5"/>
          <div class="hidden_show3">
            <!--非表示ここから-->
            <span class="text">$=7^2-2\times7\times(6a+b)+(6a+b)^2$
                    $=49-2\times7\times6a-2\times7\times b+(6a)^2+2\times6ab+b^2$</span>
            <!--ここまで-->
          </div>
        </span>
        $=49-84a-14b+36a^2+12ab+b^2$
        <br><br>  $\{9-(7a+b)\}^2$
        <span class="hidden_box3">
          <label for="label6">途中式</label>

          <input type="checkbox" id="label6"/>
          <div class="hidden_show3">
            <!--非表示ここから-->
            <span class="text">$=9^2-2\times9\times(7a+b)+(7a+b)^2$
                    $=81-2\times9\times7a-2\times9\timesb+(7a)^2+2\times7ab+b^2$</span>
            <!--ここまで-->
          </div>
        </span>
        $=81-126a-18b+49a^2+14ab+b^2$
        <br><br>$\{6-(8a+b)\}^2$
        <span class="hidden_box3">
          <label for="label7">途中式</label>

          <input type="checkbox" id="label7"/>
          <div class="hidden_show3">
            <!--非表示ここから-->
            <span class="text">$=6^2-2\times6\times(8a+b)+(8a+b)^2$
                    $=36-2\times6\times8a-2\times6\times b+(8a)^2+2\times8ab+b^2</span>
            <!--ここまで-->
          </div>
        </span>
        $=36-96a-12b+64a^2+16ab+b^2$
        <br><br>$\{10-(9a+b)\}^2$
        <span class="hidden_box3">
          <label for="label8">途中式</label>

          <input type="checkbox" id="label8"/>
          <div class="hidden_show3">
            <!--非表示ここから-->
            <span class="text">$=10^2-2\times10\times(9a+b)+(9a+b)^2$
                      $=100-2\times10\times9a-2\times10\times b+(9a)^2+2\times9ab+b^2$</span>
            <!--ここまで-->
          </div>
        </span>
        $=100-180a-20b+81a^2+18ab+b^2$<br><br>
        よって<br>
        $E(a,b)=(1)\underline{\{&emsp;&emsp;\}}^2 + \{7-(6a+b)\}^2 + \{9-(7a+b)\}^2 + \{6-(8a+b)\}^2 + \{10-(9a+b)\}^2$<br>
        <span class="hidden_box3">
          <label for="label9">途中式</label>

          <input type="checkbox" id="label9"/>
          <div class="hidden_show3">
            <!--非表示ここから-->
            <span class="text">$=(16-40a-8b+25a^2+10ab+b^2)$
            $=((2)\underline{(&emsp;&emsp;)}+b^2)$
            $+(81-126a-18b+49a^2+14ab+b^2)$
            $+(36-96a-12b+64a^2+16ab+b^2)$
            $+(100-180a-20b+81a^2+18ab+b^2)$
          $=(16+49+81+36+100)$
           $+(-40-84-126-96-180)a$
           $+(-8-14-18-12-20)b$
           $+(25+36+49+64+81)a^2$
           $+(10+12+14+16+18)ab$
           $+5b^2$</span>
            <!--ここまで-->
          </div>
        </span>
        $=282-526a-72b+255a^2+70ab+5b^2$となる。<br><br>
        $E(a,b)$の式を$a$について整理すると、<br>
        $E(a,b)$<span class="hidden_box3">
          <label for="label9">途中式</label>

          <input type="checkbox" id="label9"/>
          <div class="hidden_show3">
            <!--非表示ここから-->
            <span class="text">$=282-526a-72b+255a^2+70ab+5b^2$
      		$=255a^2+70ab-526a+5b^2-72b+282$</span>
            <!--ここまで-->
          </div>
        </span>
        $=255a^2+(70b-526)a+5b^2-72b+282$となる。これを$b$を定数として固定して、$a$で$^*$微分すると<br><br>
        $(E(a,b)$を$a$で微分$)=(3)\underline{&emsp;&emsp;}$となる。<br><br>
        また、$E(a,b)$の式を$b$について整理すると、<br>
        $E(a,b)$
        <span class="hidden_box3">
          <label for="label9">途中式</label>

          <input type="checkbox" id="label9"/>
          <div class="hidden_show3">
            <!--非表示ここから-->
            <span class="text">$=282-526a-72b+255a^2+70ab+5b^2$
      		$=5b^2+70ab-72b+255a^2-526a+282$</span>
            <!--ここまで-->
          </div>
        </span>
        $=5b^2+(70a-72)b+255a^2-526a+282$となる。これを$a$を定数として固定して、$b$で微分すると<br><br>
        $(E(a,b)$を$b$で微分$)=(4)\underline{&emsp;&emsp;}$となる。<br><br>
        誤差の二乗和が最小となる$a,b$は、関数$E(a,b)$を$a$で微分したものと<br>
        関数$E(a,b)$を$b$で微分したものがともに0となるときなので<br>
        \[
        \begin{cases}
        (E(a,b)をaで微分)=(3)\underline{&emsp;&emsp;}&emsp;&emsp;-(1)\\
        (E(a,b)をbで微分)=(4)\underline{&emsp;&emsp;}&emsp;&emsp;-(2)
        \end{cases}
        \]
        の2式に対して連立方程式を解く。<br>
        $②$を7倍すると<br><br>
        $(②×7)=70b+490a-504=0$&emsp;&emsp;$-(2)'$<br><br>
        $(1)-(2)’$を計算すると<br>
        &ensp;&ensp;&ensp;&ensp;510a+70b-526=0<br>
        -)　  490a+70b-504=0<br>
        -----------------------------<br>
        &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;20a-22=0<br>
        &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;20a=22<br><br>

        よって、$a=(5)\underline{&emsp;&emsp;}$となる。<br>
        また、$(2)$に$a=(5)\underline{&emsp;&emsp;}$を代入すると、
        <!--
        $10b+70a-72 = 0$<br>
        $a$の値を代入)$10b+70×(5)\underline{&emsp;&emsp;}-72 = 0$<br>
        整数をまとめて式を簡単に)$10b+5 = 0$<br>
        よって、
         -->
        $b=(6)\underline{&emsp;&emsp;}$となる。<br><br>
        したがって、$a=(5)\underline{&emsp;&emsp;}$,$b=(6)\underline{&emsp;&emsp;}$となる。<br><br>
        よって、「データの関係を表すための直線」は$f(x)=(5)\underline{&emsp;&emsp;}x+((6)\underline{&emsp;&emsp;})$となる。<br><br>
        次の選択肢から、この$(7)\underline{「データの関係を表すための直線」を選んでください。}$<br><br>
        <br><center><%= link_to image_tag("pro2.1.png") %></center><br><br><!--大きさ次第では２個づつ並べて表示しても良いのでは？-->
        <br><center><%= link_to image_tag("pro2.2.png") %></center><br><br>
        <br><center><%= link_to image_tag("pro2.3.png") %></center><br><br>
        <br><center><%= link_to image_tag("pro2.4.png") %></center><br><br>
        次に、求めた「データの関係を表すための直線$(f(x)=1.1x-0.5)$」に基づいて、<br>
        英語の点数が4点の人の数学の点数を予測する。<br><br>
        $f(x)$に英語の点数4点を$x$に代入した値が数学の点数と予測できるので<br>
        $f(4)=1.1×(7)\underline{&emsp;&emsp;}-0.5
       =(8)\underline{&emsp;&emsp;}-0.5
       =(9)\underline{&emsp;&emsp;}$<br><br>
       よって、英語の点数が4点の人の数学の点数は$(9)\underline{&emsp;&emsp;}$点だと予測できる。<br>
       グラフで確認してみよう。<br><br>
       <center><iframe src="https://docs.google.com/presentation/d/e/2PACX-1vSupSCSHw42dIORKdxf5CAJ1iqolbmMJjrjVmOqB3q4xm-jjWNwRURO-TXBrOsB4HGR47D1JFA96mLb/embed?start=true&loop=true&delayms=1000"
       frameborder="0"
       width="480"
       height="300"
       allowfullscreen="true"
       mozallowfullscreen="true"
       webkitallowfullscreen="true"></iframe>
       </center><br>
        </div>
        <div class="padt-10"></div>
      </div>

      <div class="sub">

        <div class="text-sub">
          <div class="pad0"></div>
           ※当サイトでは、データの関係を表すための関数が存在すると仮定します
        </div>

          <div class="text-sub">
            <div class="pad1"></div>
            <div class="hidden_box">
              <label for="label1"><span class="underl">なぜ曲線ではなく直線？</span></label>


            </div>
          </div>

          <div class="text-sub">
            <div class="pad4"></div>
             ※誤差の二乗和とは、「すべてのデータの誤差を二乗して足し合わせたもの」のことです
</div>

<div class="text-sub">
  <div class="pad5"></div>
                ※二乗のほか、四乗や偶数乗、そして絶対値が考えられます。四乗や偶数乗をすると負の値は消えます。
                しかし、値が大きくなり計算が複雑になります。また、絶対値にすると、微分をしたときに対数を考えなければいけなくなり、
                この場合も計算が複雑になります。よって最も計算が簡単な二乗を用います。
                </div>

          <div class="text-sub">
            <div class="pad2"></div>
            <br><br>$f(a,b)=a^2+ab$<br>

            $f(a,b)$を$a$で微分<br>
            $(f(a,b)$を$a$で微分$)=2a+b$<br>

            $f(a,b)$を$b$で微分<br>
            $(f(a,b)$を$b$で微分$)=a$<br>
          </div>

          <div class="text-sub">
            <div class="pad6"></div>
             ※ここの微分は，厳密には偏微分を意味する<br>
             </div>



          <div clas="text-sub">
            <div class="pad3"></div>
            <div class="box26">
              <span class="box-title">①</span>
              <p>
                <input id="Radio1" name="RadioGroup1" type="radio" onchange="onRadioButtonChange1();" value="結果：おめでとう、正解です">
                <label for="Radio1">$4-(5a+b)$</label>&emsp;
                <input id="Radio2" name="RadioGroup1" type="radio" onchange="onRadioButtonChange1();" value="結果：残念、不正解です">
                <label for="Radio2">$7-(6a+b)$</label><br>
                <input id="Radio3" name="RadioGroup1" type="radio" onchange="onRadioButtonChange1();" value="結果：残念、不正解です">
                <label for="Radio3">$5-(4a+b)$</label>
              </p>
              <span id="span1">結果：</span>
            </div>

            <div class="box26">
              <div class="box-title">②</div>
              <p>
                <input id="Radio4" name="RadioGroup2" type="radio" onchange="onRadioButtonChange2();" value="結果：おめでとう、正解です">
                <label for="Radio4">$16-40a-8b+25a^2+10ab$</label><br>
                <input id="Radio5" name="RadioGroup2" type="radio" onchange="onRadioButtonChange2();" value="結果：残念、不正解です">
                <label for="Radio5">$16-20a-8b+16a^2+10ab$</label><br>
                <input id="Radio6" name="RadioGroup2" type="radio" onchange="onRadioButtonChange2();" value="結果：残念、不正解です">
                <label for="Radio6">$25-40a-10b+16a^2+8ab$</label>
              </p>
              <span id="span2">結果：</span>
            </div>

            <div id="output2"></div>

            <div class="box26">
              <div class="box-title">③</div>
              <p>
                <input id="Radio7" name="RadioGroup3" type="radio" onchange="onRadioButtonChange3();" value="結果：おめでとう、正解です">
                <label for="Radio7">$510a+70b-526$</label><br>
                <input id="Radio8" name="RadioGroup3" type="radio" onchange="onRadioButtonChange3();" value="結果：残念、不正解です">
                <label for="Radio8">$510a+10b-526$</label><br>
                <input id="Radio9" name="RadioGroup3" type="radio" onchange="onRadioButtonChange3();" value="結果：残念、不正解です">
                <label for="Radio9">$510a+10b-72$</label>
              </p>
              <span id="span3">結果：</span>
            </div>

            <div id="output3"></div>

            <div class="box26">
              <div class="box-title">④</div>
              <p>
                <input id="Radio10" name="RadioGroup4" type="radio" onchange="onRadioButtonChange4();" value="結果：おめでとう、正解です">
                <label for="Radio10">$10b+70a-72$</label><br>
                <input id="Radio11" name="RadioGroup4" type="radio" onchange="onRadioButtonChange4();" value="結果：残念、不正解です">
                <label for="Radio11">$510a+70b-526$</label><br>
                <input id="Radio12" name="RadioGroup4" type="radio" onchange="onRadioButtonChange4();" value="結果：残念、不正解です">
                <label for="Radio12">$10b+70b-282$</label>
              </p>
              <span id="span4">結果：</span>
            </div>

            <div id="output4"></div>

            <div class="box26">
              <div class="box-title">⑤</div>
              <p>
                <input id="Radio13" name="RadioGroup5" type="radio" onchange="onRadioButtonChange5();" value="結果：おめでとう、正解です">
                <label for="Radio13">$1.1$</label>&emsp;
                <input id="Radio14" name="RadioGroup5" type="radio" onchange="onRadioButtonChange5();" value="結果：残念、不正解です">
                <label for="Radio14">$11$</label>&emsp;
                <input id="Radio15" name="RadioGroup5" type="radio" onchange="onRadioButtonChange5();" value="結果：残念、不正解です">
                <label for="Radio15">$0.11$</label>
              </p>
              <span id="span5">結果：</span>
            </div>

            <div id="output5"></div>

            <div class="box26">
              <div class="box-title">⑥</div>
              <p>
                <input id="Radio16" name="RadioGroup6" type="radio" onchange="onRadioButtonChange6();" value="結果：おめでとう、正解です">
                <label for="Radio16">$-0.5$</label>&emsp;
                <input id="Radio17" name="RadioGroup6" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                <label for="Radio17">$-0.2$</label>&emsp;
                <input id="Radio18" name="RadioGroup6" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                <label for="Radio18">$0.5$</label>
              <p>
              <span id="span6">結果：</span>
            </div>

            <div id="output6"></div>

            <div class="box26">
              <div class="box-title">⑦</div>
              <p>
                <input id="Radio16" name="RadioGroup7" type="radio" onchange="onRadioButtonChange6();" value="結果：おめでとう、正解です">
                <label for="Radio16">$4$</label>&emsp;
                <input id="Radio17" name="RadioGroup7" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                <label for="Radio17">$5$</label>&emsp;
                <input id="Radio18" name="RadioGroup7" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                <label for="Radio18">$9$</label>
              <p>
              <span id="span7">結果：</span>
            </div>

            <div id="output7"></div>

            <div class="box26">
              <div class="box-title">⑧</div>
              <p>
                <input id="Radio16" name="RadioGroup8" type="radio" onchange="onRadioButtonChange6();" value="結果：おめでとう、正解です">
                <label for="Radio16">$4.4$</label>&emsp;
                <input id="Radio17" name="RadioGroup8" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                <label for="Radio17">$5.5$</label>&emsp;
                <input id="Radio18" name="RadioGroup8" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                <label for="Radio18">$9.9$</label>
              <p>
              <span id="span8">結果：</span>
            </div>

            <div id="output8"></div>

            <div class="box26">
              <div class="box-title">⑨</div>
              <p>
                <input id="Radio16" name="RadioGroup9" type="radio" onchange="onRadioButtonChange6();" value="結果：おめでとう、正解です">
                <label for="Radio16">$3.9$</label>&emsp;
                <input id="Radio17" name="RadioGroup9" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                <label for="Radio17">$4.9$</label>&emsp;
                <input id="Radio18" name="RadioGroup9" type="radio" onchange="onRadioButtonChange6();" value="結果：残念、不正解です">
                <label for="Radio18">$9.4$</label>
              <p>
              <span id="span9">結果：</span>
            </div>

            <div id="output9"></div>
          </div>
          <!--①\{4-(5a+b)\}^2
            ➁16-40a-8b+25a^2+10ab
          ③510a+70b-526
          ④10b+70a-72
          ⑤1.1
          ⑥-0.5
          ⑦4
          4.4
          3.9-->

          <input type="button" value="解答チェック" onclick="clickBtn1()"/><br>
          <span id="span1_1">(1)結果：</span><br>
          <span id="span2_1">(2)結果：</span><br>
          <span id="span3_1">(3)結果：</span><br>
          <span id="span4_1">(4)結果：</span><br>
          <span id="span5_1">(5)結果：</span><br>
          <span id="span6_1">(6)結果：</span><br>
          <span id="span7_1">(7)結果：</span><br>
          <span id="span8_1">(8)結果：</span><br>
          <span id="span9_1">(9)結果：</span><br>

        </div>
      </div>
    </div>

    <!-- ページ読み込み後にリロードしてTEXを表示 -->
    <script language="JavaScript">

      if (window.name != "least_squares") {
        location.reload();
        window.name = "least_squares";
      }
    </script>

    <script type="text/javascript" language="javascript">

      function clickBtn1() {
        let str1 = "", str1_1 = "";
        let str2 = "", str2_1 = "";
        let str3 = "", str3_1 = "";
        let str4 = "", str4_1 = "";
        let str5 = "", str5_1 = "";
        let str6 = "", str6_1 = "";
        let str7 = "", str7_1 = "";
        let str8 = "", str8_1 = "";
        let str9 = "", str9_1 = "";
        const RadioGroup1 = document.getElementsByName("RadioGroup1");
        for (let i = 0; i < RadioGroup1.length; i++) {

          if (RadioGroup1[0].checked === true) {
            str1 = RadioGroup1[0].value;
            str1_1 = "(1) 結果：○";
            break;
            //target.innerHTML = "おめでとう、正解です";
          } else if (RadioGroup1[1].checked == true) {
            str1 = RadioGroup1[1].value;
            str1_1 = "(1) 結果：×";
            break;
          } else if (RadioGroup1[2].checked == true) {
            str1 = RadioGroup1[2].value;
            str1_1 = "(1) 結果：×";
            break;

          }

        }

        const RadioGroup2 = document.getElementsByName("RadioGroup2");
        for (let i = 0; i < RadioGroup2.length; i++) {

          if (RadioGroup2[0].checked === true) {
            str2 = RadioGroup2[0].value;
            str2_1 = "(1) 結果：○";
            break;
            //target.innerHTML = "おめでとう、正解です";
          } else if (RadioGroup2[1].checked == true) {
            str2 = RadioGroup2[1].value;
            str2_1 = "(1) 結果：×";
            break;
          } else if (RadioGroup2[2].checked == true) {
            str2 = RadioGroup2[2].value;
            str2_1 = "(1) 結果：×";
            break;
          }

        }

        const RadioGroup3 = document.getElementsByName("RadioGroup3");
        for (let i = 0; i < RadioGroup3.length; i++) {

          if (RadioGroup3[0].checked === true) {
            str3 = RadioGroup3[0].value;
            str3_1 = "(1) 結果：○";
            break;
            //target.innerHTML = "おめでとう、正解です";
          } else if (RadioGroup3[1].checked == true) {
            str3 = RadioGroup3[1].value;
            str3_1 = "(1) 結果：×";
            break;
          } else if (RadioGroup3[2].checked == true) {
            str3 = RadioGroup3[2].value;
            str3_1 = "(1) 結果：×";
            break;
          }

        }

        const RadioGroup4 = document.getElementsByName("RadioGroup4");
        for (let i = 0; i < RadioGroup4.length; i++) {

          if (RadioGroup4[0].checked === true) {
            str4 = RadioGroup4[0].value;
            str4_1 = "(1) 結果：○";
            break;
            //target.innerHTML = "おめでとう、正解です";
          } else if (RadioGroup4[1].checked == true) {
            str4 = RadioGroup4[1].value;
            str4_1 = "(1) 結果：×";
            break;
          } else if (RadioGroup4[2].checked == true) {
            str4 = RadioGroup4[2].value;
            str4_1 = "(1) 結果：×";
            break;
          }

        }

        const RadioGroup5 = document.getElementsByName("RadioGroup5");
        for (let i = 0; i < RadioGroup5.length; i++) {

          if (RadioGroup5[0].checked === true) {
            str5 = RadioGroup5[0].value;
            str5_1 = "(1) 結果：○";
            break;
            //target.innerHTML = "おめでとう、正解です";
          } else if (RadioGroup5[1].checked == true) {
            str5 = RadioGroup5[1].value;
            str5_1 = "(1) 結果：×";
            break;
          } else if (RadioGroup5[2].checked == true) {
            str5 = RadioGroup5[2].value;
            str5_1 = "(1) 結果：×";
            break;
          }

        }

        const RadioGroup6 = document.getElementsByName("RadioGroup6");
        for (let i = 0; i < RadioGroup6.length; i++) {

          if (RadioGroup6[0].checked === true) {
            str6 = RadioGroup6[0].value;
            str6_1 = "(1) 結果：○";
            break;
            //target.innerHTML = "おめでとう、正解です";
          } else if (RadioGroup6[1].checked == true) {
            str6 = RadioGroup6[1].value;
            str6_1 = "(1) 結果：×";
            break;
          } else if (RadioGroup6[2].checked == true) {
            str6 = RadioGroup6[2].value;
            str6_1 = "(1) 結果：×";
            break;
          }
        }

        const RadioGroup7 = document.getElementsByName("RadioGroup7");
        for (let i = 0; i < RadioGroup7.length; i++) {

          if (RadioGroup7[0].checked === true) {
            str7 = RadioGroup7[0].value;
            str7_1 = "(1) 結果：○";
            break;
            //target.innerHTML = "おめでとう、正解です";
          } else if (RadioGroup7[1].checked == true) {
            str7 = RadioGroup7[1].value;
            str7_1 = "(1) 結果：×";
            break;
          } else if (RadioGroup7[2].checked == true) {
            str7 = RadioGroup7[2].value;
            str7_1 = "(1) 結果：×";
            break;

          }

        }

        const RadioGroup8 = document.getElementsByName("RadioGroup8");
        for (let i = 0; i < RadioGroup8.length; i++) {

          if (RadioGroup8[0].checked === true) {
            str8 = RadioGroup8[0].value;
            str8_1 = "(1) 結果：○";
            break;
            //target.innerHTML = "おめでとう、正解です";
          } else if (RadioGroup8[1].checked == true) {
            str8 = RadioGroup8[1].value;
            str8_1 = "(1) 結果：×";
            break;
          } else if (RadioGroup8[2].checked == true) {
            str8 = RadioGroup8[2].value;
            str8_1 = "(1) 結果：×";
            break;

          }

        }

        const RadioGroup9 = document.getElementsByName("RadioGroup9");
        for (let i = 0; i < RadioGroup9.length; i++) {

          if (RadioGroup9[0].checked === true) {
            str9 = RadioGroup9[0].value;
            str9_1 = "(1) 結果：○";
            break;
            //target.innerHTML = "おめでとう、正解です";
          } else if (RadioGroup9[1].checked == true) {
            str9 = RadioGroup9[1].value;
            str9_1 = "(1) 結果：×";
            break;
          } else if (RadioGroup9[2].checked == true) {
            str9 = RadioGroup9[2].value;
            str9_1 = "(1) 結果：×";
            break;

          }

        }
        document.getElementById("span1").textContent = str1;
        document.getElementById("span1_1").textContent = str1_1;
        document.getElementById("span2").textContent = str2;
        document.getElementById("span2_1").textContent = str2_1;
        document.getElementById("span3").textContent = str3;
        document.getElementById("span3_1").textContent = str3_1;
        document.getElementById("span4").textContent = str4;
        document.getElementById("span4_1").textContent = str4_1;
        document.getElementById("span5").textContent = str5;
        document.getElementById("span5_1").textContent = str5_1;
        document.getElementById("span6").textContent = str6;
        document.getElementById("span6_1").textContent = str6_1;
        document.getElementById("span7").textContent = str7;
        document.getElementById("span7_1").textContent = str7_1;
        document.getElementById("span8").textContent = str8;
        document.getElementById("span8_1").textContent = str8_1;
        document.getElementById("span9").textContent = str9;
        document.getElementById("span9_1").textContent = str9_1;
      }
    </script>
